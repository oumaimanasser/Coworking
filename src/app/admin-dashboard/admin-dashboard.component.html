<!-- Salles Section - Modifier le formulaire -->
<div *ngIf="currentPage === 'salles'" class="page-content">
  <div class="section-header">
    <h2><i class="fas fa-building"></i> Gestion des Salles</h2>
  </div>

  <div class="form-container">
    <h3>{{ editingSalle ? 'Modifier la salle' : 'Ajouter une nouvelle salle' }}</h3>
    <form [formGroup]="editingSalle ? editSalleForm : newSalleForm"
          (ngSubmit)="editingSalle ? updateSalle() : addSalle()"
          class="add-form" enctype="multipart/form-data">
      <div class="form-row">
        <div class="form-group">
          <label>Nom de la salle</label>
          <input formControlName="nom" type="text" class="form-input" placeholder="Nom de la salle">
        </div>
        <div class="form-group">
          <label>Capacité</label>
          <input formControlName="capacite" type="number" class="form-input" min="1">
        </div>
        <div class="form-group">
          <label>Statut</label>
          <select formControlName="status" class="form-input">
            <option value="DISPONIBLE">Disponible</option>
            <option value="INDISPONIBLE">Indisponible</option>
            <option value="MAINTENANCE">Maintenance</option>
          </select>
        </div>
        <!-- Nouveau champ pour l'image -->
        <div class="form-group">
          <label>Image</label>
          <input type="file" (change)="onFileSelected($event)" accept="image/*" class="form-input">
          <small *ngIf="selectedFile">Fichier sélectionné: {{ selectedFile.name }}</small>
        </div>
        <div class="form-group">
          <button type="submit" class="submit-btn" [disabled]="editingSalle ? !editSalleForm.valid : !newSalleForm.valid">
            <i class="fas" [ngClass]="editingSalle ? 'fa-save' : 'fa-plus'"></i>
            {{ editingSalle ? 'Modifier' : 'Ajouter' }}
          </button>
          <button *ngIf="editingSalle" type="button" class="cancel-btn" (click)="cancelEdit()">
            <i class="fas fa-times"></i> Annuler
          </button>
        </div>
      </div>
    </form>
  </div>

  <div class="table-container">
    <table class="data-table">
      <thead>
      <tr>
        <th>Nom</th>
        <th>Capacité</th>
        <th>Image</th>
        <th>Statut</th>
        <th>Actions</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let s of salles">
        <td>{{ s.nom }}</td>
        <td>{{ s.capacite }} personnes</td>
        <td>
          <!-- Afficher l'image si elle existe -->
          <img *ngIf="s.imagePath" [src]="getImageUrl(s.imagePath)" alt="{{ s.nom }}" class="salle-image">
          <span *ngIf="!s.imagePath">Aucune image</span>
        </td>
        <td>
          <span class="status-badge" [ngClass]="getStatusClass(s.status)">
            {{ s.status }}
          </span>
        </td>
        <td>
          <div class="action-buttons">
            <button class="action-btn edit-btn" (click)="editSalle(s)">
              <i class="fas fa-edit"></i> Modifier
            </button>
            <button class="action-btn delete-btn" (click)="deleteSalle(s.id)">
              <i class="fas fa-trash"></i> Supprimer
            </button>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
